<!DOCTYPE html>
<html lang="ru">
<head>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --accent-gold: #FFD700;
            --call-color: #2e7d32;
            --put-color: #c62828;
            --strike-bg: #2c2c2c;
            --bullish: #4caf50;
            --bearish: #f44336;
            --neutral: #9e9e9e;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-color); color: var(--text-color); }
        a { text-decoration: none; color: inherit; }
        
        .chart-box, .analytics-card {
            position: relative;
            overflow: visible !important;
            z-index: 1;
        }

        .chart-title, .analytics-title {
            display: flex; justify-content: center; align-items: center; flex-wrap: wrap;
            position: relative; z-index: 10;
            font-size: 1.1em; font-weight: bold; color: var(--accent-gold);
            margin-bottom: 15px; text-align: center;
        }

        .chart-help, .analytics-help {
            position: relative; display: inline-block; cursor: help;
            margin-left: 8px; font-size: 1.1em; color: var(--accent-gold); z-index: 20;
        }

        .chart-annotation, .analytics-annotation {
            visibility: hidden; opacity: 0;
            position: absolute; bottom: 140%; left: 50%; transform: translateX(-50%);
            width: 260px; background: rgba(15, 15, 15, 0.98);
            border: 1px solid var(--accent-gold); box-shadow: 0 5px 20px rgba(0,0,0,0.8);
            border-radius: 8px; padding: 12px 15px;
            color: #eee; font-size: 0.85rem; font-weight: normal; line-height: 1.4;
            text-align: left; white-space: normal;
            transition: all 0.2s ease-in-out; pointer-events: none; z-index: 99999;
        }

        .chart-annotation::after, .analytics-annotation::after {
            content: ''; position: absolute; top: 100%; left: 50%; margin-left: -6px;
            border-width: 6px; border-style: solid;
            border-color: var(--accent-gold) transparent transparent transparent;
        }
        
        .chart-annotation strong, .analytics-annotation strong { color: var(--accent-gold); font-weight: bold; }

        .chart-help:hover .chart-annotation, 
        .analytics-help:hover .analytics-annotation {
            visibility: visible; opacity: 1; bottom: 125%;
        }

        header { background: #333; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .logo { font-size: 1.5em; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 10px; }
        .menu { list-style: none; display: flex; gap: 20px; padding: 0; margin: 0; }
        .menu a:hover { color: var(--accent-gold); }
        .tg-link-small { background: #24A1DE; padding: 5px 12px; border-radius: 15px; display: flex; align-items: center; gap: 5px; font-size: 0.8em; color: white; }
        .tg-link-small:hover { background: #1d8cbd; transform: translateY(-1px); }

        .hero { background: linear-gradient(135deg, #000000 0%, #434343 100%); padding: 40px 20px; text-align: center; color: #fff; }
        .hero h1 { margin: 0 0 5px 0; font-size: 2em; font-weight: 800; color: var(--accent-gold); }
        .subtitle { font-size: 1.1em; margin-bottom: 20px; opacity: 0.8; }
        .hero-buttons { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 20px; }
        .btn { padding: 12px 25px; border-radius: 25px; font-weight: bold; transition: 0.3s; display: inline-flex; align-items: center; gap: 10px; border: none; cursor: pointer; text-decoration: none; }
        .btn-primary { background: var(--accent-gold); color: #000; }
        .btn-primary:hover { background: #fff; }
        .btn-telegram { background: #24A1DE; color: white; }
        .btn-telegram:hover { background: #1d8cbd; transform: translateY(-2px); }

        .live-data { padding: 20px; background: #000; }
        .warning-block { text-align: center; margin-bottom: 20px; border: 1px solid #b71c1c; background: rgba(183, 28, 28, 0.1); padding: 15px; border-radius: 8px; }
        .warning-title { color: #e57373; font-size: 1em; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .warning-text { color: #ccc; font-size: 0.9em; margin: 0; }

        .alerts-container { max-width: 1200px; margin: 0 auto 20px auto; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .alert { padding: 12px 20px; border-radius: 8px; font-weight: bold; font-size: 0.9em; border-left: 4px solid; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .alert-warning { background: rgba(255, 152, 0, 0.1); border-color: #ff9800; color: #ffb74d; }
        .alert-danger { background: rgba(244, 67, 54, 0.1); border-color: #f44336; color: #ef5350; }
        .alert-info { background: rgba(33, 150, 243, 0.1); border-color: #2196f3; color: #42a5f5; }
        .alert-success { background: rgba(76, 175, 80, 0.1); border-color: #4caf50; color: #66bb6a; }

        .data-container { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .data-card { background: #222; padding: 10px; border-radius: 8px; min-width: 140px; text-align: center; border: 1px solid #333; }
        .big-number { font-size: 1.3em; font-weight: bold; color: var(--accent-gold); margin: 5px 0; }
        .small-text { color: #888; font-size: 0.75em; }
        .pcr-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
        .pcr-item div:first-child { font-weight: bold; color: #fff; }
        .pcr-item div:last-child { font-size: 0.7em; color: #888; }

        .analytics-grid { max-width: 1200px; margin: 0 auto 20px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .analytics-card { background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%); border: 1px solid #444; border-radius: 10px; padding: 20px; }
        .analytics-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--accent-gold); border-top-left-radius: 10px; border-bottom-left-radius: 10px; }
        .analytics-value { font-size: 2em; font-weight: bold; color: #fff; text-align: center; margin: 10px 0; text-shadow: 0 0 10px rgba(255,255,255,0.1); }
        .analytics-label { color: #888; font-size: 0.85em; text-align: center; }

        .level-item { background: #222; padding: 8px 12px; border-radius: 6px; margin: 5px 0; display: flex; justify-content: space-between; align-items: center; border-left: 3px solid transparent; }
        .level-item.support { border-left-color: var(--call-color); }
        .level-item.resistance { border-left-color: var(--put-color); }
        .level-strike { font-weight: bold; color: #fff; }

        .charts-container { max-width: 1200px; margin: 0 auto 30px auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .chart-box { background: #1a1a1a; border: 1px solid #444; padding: 20px; border-radius: 10px; }
        .chart-wrapper { position: relative; height: 300px; }

        .sentiment-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 0.9em; text-transform: uppercase; }
        .sentiment-bullish { background: var(--bullish); color: #fff; }
        .sentiment-bearish { background: var(--bearish); color: #fff; }
        .sentiment-neutral { background: var(--neutral); color: #fff; }

        .risk-indicator { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; }
        .risk-bar { width: 100%; height: 20px; background: #333; border-radius: 10px; overflow: hidden; position: relative; }
        .risk-fill { height: 100%; transition: width 0.5s ease; border-radius: 10px; }
        .risk-low { background: var(--bullish); }
        .risk-medium { background: #ff9800; }
        .risk-high { background: var(--bearish); }

        .control-panel { max-width: 1000px; margin: 0 auto 20px auto; background: #1a1a1a; border: 1px solid #444; padding: 20px; border-radius: 10px; display: flex; flex-direction: column; gap: 15px; }
        .expiry-toggle, .calculator-panel, .strike-filter { display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .expiry-toggle { background: #2a2a2a; padding: 15px; border: 1px solid var(--accent-gold); border-radius: 8px; }
        .calculator-panel { background: #2a2a2a; border: 1px solid var(--accent-gold); padding: 15px; border-radius: 8px; }
        
        button { cursor: pointer; }
        .expiry-btn, .filter-btn { background: #333; color: #aaa; border: 1px solid #555; padding: 8px 16px; border-radius: 5px; transition: all 0.3s; }
        .expiry-btn:hover, .filter-btn:hover { background: #444; }
        .expiry-btn.active, .filter-btn.active { background: var(--accent-gold); color: #000; border-color: var(--accent-gold); font-weight: bold; }
        .calc-input { background: #111; border: 1px solid #555; color: var(--accent-gold); padding: 10px; border-radius: 5px; width: 100px; font-size: 1.2em; text-align: center; font-weight: bold; }
        .premium-btn { background: #d32f2f; color: white; padding: 10px 20px; border: none; border-radius: 5px; font-weight: bold; transition: all 0.3s; }
        .premium-btn:hover { background: #f44336; }
        .premium-btn.active { background: #4caf50; }

        .top5-container { max-width: 1000px; margin: 0 auto 20px auto; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .top5-box { background: #1a1a1a; border: 1px solid #444; padding: 15px; border-radius: 10px; }
        .top5-title { font-size: 1.1em; font-weight: bold; color: var(--accent-gold); margin-bottom: 10px; text-align: center; border-bottom: 2px solid #333; padding-bottom: 8px; }
        .top5-item { background: #222; padding: 8px 12px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; border-left: 3px solid transparent; margin-bottom: 5px; }
        .top5-item.call-item { border-left-color: var(--call-color); }
        .top5-item.put-item { border-left-color: var(--put-color); }
        .top5-strike { font-weight: bold; color: #fff; font-size: 1.1em; min-width: 70px; }
        .top5-value { color: var(--accent-gold); font-weight: bold; font-size: 1em; }

        .levels-container { max-width: 1000px; margin: 0 auto; background: #1a1a1a; border-radius: 8px; overflow: hidden; border: 1px solid #333; }
        .table-header-info { background: #2c2c2c; padding: 8px 20px; text-align: center; color: #fff; font-size: 0.9em; border-bottom: 1px solid #444; display: flex; justify-content: space-between; }
        .dte-tag { background: #d32f2f; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; }
        .table-wrapper { overflow-x: auto; max-height: 600px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; text-align: center; font-size: 0.85em; }
        thead { background: #111; color: #aaa; font-size: 0.9em; position: sticky; top: 0; z-index: 5; }
        th { padding: 8px 4px; font-weight: 600; white-space: nowrap; }
        td { padding: 6px 4px; border-bottom: 1px solid #2a2a2a; } 
        .col-strike { background: #252525; color: #fff; font-weight: bold; font-size: 1.1em; border-left: 1px solid #333; border-right: 1px solid #333; width: 80px; }
        .row-atm td { background: rgba(255, 215, 0, 0.1); border-top: 1px solid var(--accent-gold); border-bottom: 1px solid var(--accent-gold); }
        .forward-active { color: var(--accent-gold) !important; text-decoration: underline; }

        .val-0 { color: #333; } .val-1 { color: #666; } .val-2 { color: #999; } .val-3 { color: #ccc; font-weight: 500; }
        .val-4 { color: #fff; font-weight: bold; } .val-5 { color: #4fc3f7; font-weight: bold; font-size: 1.05em; }
        .val-6 { color: #FFD700; font-weight: bold; font-size: 1.1em; text-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
        .val-7 { background: #b71c1c; color: #fff; font-weight: bold; padding: 4px; border-radius: 4px; }

        .download { padding: 40px 20px; text-align: center; }
        .download-card { background: #222; padding: 30px; display:inline-block; border-radius:10px; border:1px solid #333; }
        .btn-download { background: var(--call-color); color: white; padding: 15px 30px; border-radius: 5px; display: inline-block; margin: 10px 0; font-weight: bold; }
        .disclaimer-link { background: #333; color: var(--accent-gold); padding: 10px 20px; border-radius: 5px; display: inline-block; margin: 10px; cursor: pointer; font-weight: bold; }
        .disclaimer-link:hover { background: #444; }

        .security-info { max-width: 800px; margin: 0 auto 3rem auto; text-align: left; }
        .security-card { background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 100%); border: 2px solid #4caf50; border-radius: 15px; padding: 2rem; color: #fff; box-shadow: 0 10px 30px rgba(76, 175, 80, 0.3); }
        .security-icon { font-size: 3rem; text-align: center; margin-bottom: 1rem; }
        .security-card h3 { color: #81c784; text-align: center; margin-bottom: 1rem; font-size: 1.5rem; }
        .install-guide { background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 1rem; margin-top: 1.5rem; cursor: pointer; }
        .install-guide summary { font-weight: bold; color: #81c784; outline: none; }

        .disclaimer-modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); overflow: auto; }
        .disclaimer-content { background: #1a1a1a; margin: 5% auto; padding: 30px; border: 2px solid var(--accent-gold); border-radius: 10px; width: 90%; max-width: 700px; color: #fff; }
        .close-disclaimer { background: var(--accent-gold); color: #000; padding: 10px 30px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; float: right; }
        .close-disclaimer:hover { background: #fff; }

        footer { background: #111; padding: 20px; text-align: center; color: #666; font-size: 0.8em; }

        @media (max-width: 768px) {
            .menu { display: none; }
            .hero h1 { font-size: 1.8em; }
            .calculator-panel, .strike-filter, .expiry-toggle { flex-direction: column; }
            .top5-container, .analytics-grid, .charts-container { grid-template-columns: 1fr; }
            .chart-annotation, .analytics-annotation { width: 250px; left: 50%; bottom: 150%; }
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="–û–ø—Ü–∏–æ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ Gold (CME). Max Pain, Gamma Walls, Greeks Analytics, Real-time Charts.">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>">

    <title>Gold Options - Pro Analytics</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

    <header>
    <div class="logo"><span>üìä</span> Gold Options</div>
    <nav>
        <ul class="menu">
            <li><a href="#analytics">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
            <li><a href="#charts">–ì—Ä–∞—Ñ–∏–∫–∏</a></li>
            <li><a href="#greeks">Greeks</a></li>
            <li><a href="#top5">–¢–û–ü-5</a></li>
            <li><a href="#download">APK</a></li>
            <li class="tg-menu-item">
                <a href="https://t.me/+-tmtq_FUl2NhMjVi" target="_blank" class="tg-link-small">
                    <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.891 8.146l-1.703 8.026c-.128.564-.463.702-.937.437l-2.592-1.911-1.251 1.203c-.138.138-.254.254-.518.254l.186-2.637 4.8-4.336c.209-.186-.045-.289-.323-.104l-5.932 3.735-2.556-.799c-.555-.174-.567-.555.116-.822l9.989-3.85c.463-.174.867.104.721.799z"/></svg>
                    Telegram
                </a>
            </li>
        </ul>
    </nav>
</header>

    <section class="hero">
    <h1>Gold Analytics Pro</h1>
    <p class="subtitle">Max Pain ‚Ä¢ Gamma Walls ‚Ä¢ Greeks Analytics ‚Ä¢ Real-time Data</p>
    
    <div class="hero-buttons">
        <a href="#download" class="btn btn-primary">–°–∫–∞—á–∞—Ç—å Android APK</a>
        
        <a href="https://t.me/+-tmtq_FUl2NhMjVi" target="_blank" class="btn btn-telegram">
            <svg viewBox="0 0 24 24" width="22" height="22"><path fill="currentColor" d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.891 8.146l-1.703 8.026c-.128.564-.463.702-.937.437l-2.592-1.911-1.251 1.203c-.138.138-.254.254-.518.254l.186-2.637 4.8-4.336c.209-.186-.045-.289-.323-.104l-5.932 3.735-2.556-.799c-.555-.174-.567-.555.116-.822l9.989-3.85c.463-.174.867.104.721.799z"/></svg>
            –ù–∞—à –∫–∞–Ω–∞–ª
        </a>
    </div>
</section>

    <div id="disclaimerModal" class="disclaimer-modal">
        <div class="disclaimer-content">
            <h2>‚ö†Ô∏è –û–¢–ö–ê–ó –û–¢ –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–ò</h2>
            
            <p><strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä:</strong><br>
            –í—Å–µ –¥–∞–Ω–Ω—ã–µ, –≥—Ä–∞—Ñ–∏–∫–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Ä–∞—Å—á–µ—Ç—ã –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ "Gold Analytics Pro" –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö. –û–Ω–∏ –ù–ï —è–≤–ª—è—é—Ç—Å—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Å–æ–≤–µ—Ç–æ–º, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π –∫ –ø–æ–∫—É–ø–∫–µ/–ø—Ä–æ–¥–∞–∂–µ –∞–∫—Ç–∏–≤–æ–≤ –∏–ª–∏ —Ç–æ—Ä–≥–æ–≤—ã–º —Å–∏–≥–Ω–∞–ª–æ–º.</p>
            
            <p><strong>–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–π:</strong><br>
            –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å, –ø–æ–ª–Ω–æ—Ç—É –∏–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –æ–ø—Ü–∏–æ–Ω–∞–º –∏ —Ñ—å—é—á–µ—Ä—Å–∞–º –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.</p>
            
            <p><strong>–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫:</strong><br>
            –¢–æ—Ä–≥–æ–≤–ª—è —Ñ—å—é—á–µ—Ä—Å–∞–º–∏ –∏ –æ–ø—Ü–∏–æ–Ω–∞–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ (0DTE), —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –≤—ã—Å–æ–∫–∏–º —Ä–∏—Å–∫–æ–º –ø–æ–ª–Ω–æ–π –ø–æ—Ç–µ—Ä–∏ –∫–∞–ø–∏—Ç–∞–ª–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ—Å–µ—Ç –ø–æ–ª–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–≤–æ–∏ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è.</p>
            
            <p><strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:</strong><br>
            –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É–±—ã—Ç–∫–∏, —É–ø—É—â–µ–Ω–Ω—É—é –≤—ã–≥–æ–¥—É –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
            
            <p><strong>–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:</strong><br>
            –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—É–±–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ –∞–Ω–∞–ª–∏–∑–∞. –î–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –±–∏—Ä–∂–∏.</p>
            
            <hr style="border-color: #444; margin: 20px 0;">
            
            <h2>üîí –ü–û–õ–ò–¢–ò–ö–ê –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–ò</h2>
            
            <p><strong>–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:</strong><br>
            –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "Gold Analytics Pro" –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</p>
            
            <p><strong>Cookies:</strong><br>
            –°–∞–π—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ cookies –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞. –ú—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∏–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ cookies —Ç—Ä–µ—Ç—å–∏—Ö —Å—Ç–æ—Ä–æ–Ω.</p>
            
            <p><strong>–í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏:</strong><br>
            –°–∞–π—Ç –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —ç—Ç–∏—Ö —Å–∞–π—Ç–æ–≤.</p>
            
            <p><strong>–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏:</strong><br>
            –ú—ã –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—É—é –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏. –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ —Å–∞–π—Ç–µ.</p>
            
            <button class="close-disclaimer" onclick="closeDisclaimer()">–ü–æ–Ω—è—Ç–Ω–æ</button>
            <div style="clear:both;"></div>
        </div>
    </div>

    <section class="live-data">
        
        <div class="warning-block">
            <div class="warning-title">‚ö† –°–¢–ê–¢–£–° –î–ê–ù–ù–´–•</div>
            <p class="warning-text">
                –û–ø—Ü–∏–æ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 5 –º–∏–Ω—É—Ç.<br>
                –¶–µ–Ω–∞ —Ñ—å—é—á–µ—Ä—Å–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–æ 5 —Å–µ–∫—É–Ω–¥.<br>
                –ò–Ω—Ç—Ä–∞–¥–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥.
            </p>
        </div>

        <div id="alerts-container" class="alerts-container">
            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
        </div>
        
        <div class="data-container">
            <div class="data-card">
                <div class="small-text">–¶–µ–Ω–∞ (Live)</div>
                <div class="big-number" id="futures-price">...</div>
            </div>
            
            <div class="data-card" style="min-width: 180px;">
                <div class="pcr-grid">
                    <div class="pcr-item">
                        <div id="pcr-oi">...</div>
                        <div>PCR (OI)</div>
                    </div>
                    <div class="pcr-item">
                        <div id="pcr-vol">...</div>
                        <div>PCR (Vol)</div>
                    </div>
                </div>
            </div>
            
            <div class="data-card">
                <div class="small-text">–ë–∞–ª–∞–Ω—Å</div>
                <div class="big-number" id="balance-price">...</div>
            </div>
            <div class="data-card" style="min-width: 200px;">
    <div class="small-text" style="color: var(--accent-gold); font-weight: bold; line-height: 1.2;">
        –ü–û–°–õ–ï–î–ù–ï–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï<br>–î–ê–ù–ù–´–• –ü–û UTC
    </div>
    <div class="big-number" id="updated-time" style="font-size: 1.1em; margin-top: 5px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>
        </div>

        <!-- üî• –ò–ù–¢–†–ê–î–ï–ô –ê–ù–ê–õ–ò–¢–ò–ö–ê -->
        <div id="analytics" class="analytics-grid">
            <!-- Max Pain -->
            <div class="analytics-card">
                <div class="analytics-title">üéØ Max Pain</div>
                <div class="analytics-value" id="max-pain-value">-</div>
                <div class="analytics-label">–¢–æ—á–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–æ–ª–∏</div>
            </div>
                        <!-- 1. Expected Move -->
            <div class="analytics-card">
                <div class="analytics-title">
                    üìè Expected Move (¬±1œÉ)
                    <span class="analytics-help">‚ùì
                        <span class="analytics-annotation">
                            <strong>–û–∂–∏–¥–∞–µ–º–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ:</strong> –î–∏–∞–ø–∞–∑–æ–Ω (68% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏), –≤ –∫–æ—Ç–æ—Ä–æ–º —Ü–µ–Ω–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –¥–æ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏. –†–∞—Å—Å—á–∏—Ç–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ IV.
                        </span>
                    </span>
                </div>
                <div class="analytics-value" id="exp-move-value" style="color: var(--accent-gold);">-</div>
                <div class="analytics-label" id="exp-move-range">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞...</div>
            </div>
            
            <!-- 2. Probabilities (ITM) -->
            <div class="analytics-card">
                <div class="analytics-title">
<!-- ... (–ù–ê–ß–ê–õ–û –ö–û–î–ê –ë–´–õ–û –í –í–ê–®–ï–ú –ó–ê–ü–†–û–°–ï, –≠–¢–û –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –° –ú–ï–°–¢–ê –û–ë–†–´–í–ê) ... -->

                    üéØ ITM Probability
                    <span class="analytics-help">‚ùì
                        <span class="analytics-annotation">
                            <strong>In-The-Money Probability:</strong> –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ç–æ–≥–æ, —á—Ç–æ —Ü–µ–Ω–∞ –æ–∫–∞–∂–µ—Ç—Å—è "–≤ –¥–µ–Ω—å–≥–∞—Ö" –∫ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ Delta ATM –æ–ø—Ü–∏–æ–Ω–æ–≤.
                        </span>
                    </span>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                    <div style="text-align: center;">
                        <div style="color: var(--call-color); font-weight: bold; font-size: 1.2em;" id="prob-call">Loading...</div>
                        <div style="font-size: 0.7em; color: #888;">CALL ITM</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: var(--put-color); font-weight: bold; font-size: 1.2em;" id="prob-put">Loading...</div>
                        <div style="font-size: 0.7em; color: #888;">PUT ITM</div>
                    </div>
                </div>
            </div>
            
            <!-- 3. Advanced Greeks (Charm/Color) -->
            <div class="analytics-card">
                <div class="analytics-title">
                    üåÄ Advanced Greeks
                    <span class="analytics-help">‚ùì
                        <span class="analytics-annotation">
                            <strong>Color:</strong> –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ì–∞–º–º—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏ (Gamma Decay). <br>
                            <strong>Charm:</strong> (Delta Decay) –°–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –î–µ–ª—å—Ç—ã —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏. –í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–Ω—ã–º–∏.
                        </span>
                    </span>
                </div>
                <div style="display: flex; flex-direction: column; gap: 5px; margin-top: 5px;">
                    <div class="level-item" style="border: none; background: rgba(255,255,255,0.05);">
                        <span style="font-size: 0.8em; color: #888;">Color (Œì Decay):</span>
                        <span id="metric-color" style="font-weight: bold;">-</span>
                    </div>
                    <div class="level-item" style="border: none; background: rgba(255,255,255,0.05);">
                        <span style="font-size: 0.8em; color: #888;">Charm (Œî Decay):</span>
                        <span id="metric-charm" style="font-weight: bold;">-</span>
                    </div>
                </div>
            </div>
            
            <!-- 4. Economic Calendar -->
            <div class="analytics-card">
                <div class="analytics-title">üìÖ Economic Calendar</div>
                <div id="calendar-list" style="margin-top: 10px; font-size: 0.85em;">
                    <div class="analytics-label">–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...</div>
                </div>
            </div>

            <!-- 5. Zero Gamma Level -->
            <div class="analytics-card">
                <div class="analytics-title">‚ö° Zero Gamma Level</div>
                <div class="analytics-value" id="zero-gamma-value">-</div>
                <div class="analytics-label" id="zero-gamma-label">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <!-- 6. Vanna Exposure -->
            <div class="analytics-card">
                <div class="analytics-title">
                    üåä Vanna Exposure
                    <span class="analytics-help">‚ùì
                        <span class="analytics-annotation">
                            <strong>Vanna:</strong> –í–ª–∏—è–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (IV) –Ω–∞ –î–µ–ª—å—Ç—É. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –º–∞—Ä–∫–µ—Ç-–º–µ–π–∫–µ—Ä—ã –±—É–¥—É—Ç —Ö–µ–¥–∂–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ IV.
                        </span>
                    </span>
                </div>
                <div class="analytics-value" id="vanna-net">-</div>
                <div class="analytics-label" id="vanna-label">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <!-- 7. GEX Profile (Walls) -->
            <div class="analytics-card" style="grid-column: span 1;">
                <div class="analytics-title">üß± GEX Walls (Res/Sup)</div>
                <div id="key-levels-display" style="margin-top: 10px; max-height: 120px; overflow-y: auto;">
                    <div class="analytics-label">–ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–≤–Ω–µ–π...</div>
                </div>
            </div>
        </div>

        <!-- üî• –ì–†–ê–§–ò–ö–ò (CHARTS CONTAINER) -->
        <div id="charts" class="charts-container">
            <!-- 1. OI Distribution -->
            <div class="chart-box">
                <div class="chart-title">
                    üìä OI Distribution (Call vs Put)
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>–û—Ç–∫—Ä—ã—Ç—ã–π –∏–Ω—Ç–µ—Ä–µ—Å:</strong> –ó–µ–ª–µ–Ω—ã–π (Calls) = –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ. –ö—Ä–∞—Å–Ω—ã–π (Puts) = –ü–æ–¥–¥–µ—Ä–∂–∫–∞. –ë–æ–ª—å—à–∏–µ —Å–∫–æ–ø–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ü–µ–ª–∏ —Ü–µ–Ω—ã.
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="oiChart"></canvas>
                </div>
            </div>

            <!-- 2. Volume Heatmap -->
            <div class="chart-box">
                <div class="chart-title">
                    üìà Volume Heatmap
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>–û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤:</strong> –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –í—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º –Ω–∞ —Å—Ç—Ä–∞–π–∫–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–∏–ª—É —É—Ä–æ–≤–Ω—è OI.
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="volumeChart"></canvas>
                </div>
            </div>

            <!-- 3. Gamma Exposure -->
            <div class="chart-box">
                <div class="chart-title">
                    ‚ö° Gamma Exposure (GEX)
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>GEX:</strong> –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ MM –¥–æ–ª–∂–Ω—ã —Ö–µ–¥–∂–∏—Ä–æ–≤–∞—Ç—å. <br>
                            (+) Gamma: MM –ø—Ä–æ–¥–∞—é—Ç —Ä–æ—Å—Ç, –ø–æ–∫—É–ø–∞—é—Ç –ø–∞–¥–µ–Ω–∏–µ (—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è). <br>
                            (-) Gamma: MM –ø–æ–∫—É–ø–∞—é—Ç —Ä–æ—Å—Ç, –ø—Ä–æ–¥–∞—é—Ç –ø–∞–¥–µ–Ω–∏–µ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ/–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å).
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="gammaChart"></canvas>
                </div>
            </div>

            <!-- 4. Max Pain Analysis -->
            <div class="chart-box">
                <div class="chart-title">
                    üéØ Max Pain Curve
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>Max Pain:</strong> –¢–æ—á–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –ø–æ –æ–ø—Ü–∏–æ–Ω–∞–º. –¶–µ–Ω–∞ —á–∞—Å—Ç–æ "–ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è" –∫ –º–∏–Ω–∏–º—É–º—É —ç—Ç–æ–π –∫—Ä–∏–≤–æ–π –∫ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏.
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="maxPainChart"></canvas>
                </div>
            </div>

            <!-- 5. IV Smile -->
            <div class="chart-box">
                <div class="chart-title">
                    üåà IV Smile (Skew)
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>–£–ª—ã–±–∫–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏:</strong> –ï—Å–ª–∏ Puts IV (–∫—Ä–∞—Å–Ω–∞—è) –≤—ã—à–µ Calls IV (–∑–µ–ª–µ–Ω–∞—è) ‚Äî —Ä—ã–Ω–æ–∫ –±–æ–∏—Ç—Å—è –ø–∞–¥–µ–Ω–∏—è (Bearish Skew).
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="ivChart"></canvas>
                </div>
            </div>

            <!-- 6. Delta Profile -->
            <div class="chart-box">
                <div class="chart-title">
                    ‚öñÔ∏è Delta Profile
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>Delta Exposure:</strong> –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è —Ä—ã–Ω–∫–∞. –ü—Ä–µ–æ–±–ª–∞–¥–∞–Ω–∏–µ Call Delta –≥–æ–≤–æ—Ä–∏—Ç –æ –±—ã—á—å–µ–º –Ω–∞—Å—Ç—Ä–æ–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="deltaChart"></canvas>
                </div>
            </div>
            
            <!-- 7. GEX Net Profile -->
            <div class="chart-box">
                <div class="chart-title">
                    üî• Net GEX Profile
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>Net GEX:</strong> –ß–∏—Å—Ç–∞—è –≥–∞–º–º–∞ –ø–æ —Å—Ç—Ä–∞–π–∫–∞–º. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—Ä–æ–≤–Ω–∏ "Gamma Flip" (–ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç + –∫ -).
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="gexChart"></canvas>
                </div>
            </div>

            <!-- 8. Theta Decay -->
            <div class="chart-box">
                <div class="chart-title">
                    ‚è±Ô∏è Theta Decay
                    <span class="chart-help">‚ùì
                        <span class="chart-annotation">
                            <strong>Theta:</strong> –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–µ—Ä—è–µ—Ç –æ–ø—Ü–∏–æ–Ω –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ü—Ä–æ–¥–∞–≤—Ü—ã –æ–ø—Ü–∏–æ–Ω–æ–≤ –ª—é–±—è—Ç –≤—ã—Å–æ–∫—É—é Theta.
                        </span>
                    </span>
                </div>
                <div class="chart-wrapper">
                    <canvas id="thetaChart"></canvas>
                </div>
            </div>
        </div>

        <!-- üî• TOTAL GREEKS DASHBOARD -->
        <div id="greeks" style="max-width: 1200px; margin: 0 auto 30px auto;">
            <h2 style="text-align: center; color: var(--accent-gold); margin-bottom: 20px;">üéì Aggregate Greeks</h2>
            
            <div class="analytics-grid">
                <div class="analytics-card">
                    <div class="analytics-title">Œî Net Delta</div>
                    <div class="analytics-value" id="total-net-delta">-</div>
                    <div class="analytics-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-title">Œì Total Gamma</div>
                    <div class="analytics-value" id="total-gamma">-</div>
                    <div class="analytics-label">–†–∏—Å–∫ —É—Å–∫–æ—Ä–µ–Ω–∏—è</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-title">ŒΩ Total Vega</div>
                    <div class="analytics-value" id="total-vega">-</div>
                    <div class="analytics-label">–†–∏—Å–∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-title">Œò Total Theta</div>
                    <div class="analytics-value" id="total-theta">-</div>
                    <div class="analytics-label">–î–Ω–µ–≤–Ω–æ–π —Ä–∞—Å–ø–∞–¥ ($)</div>
                </div>
            </div>
        </div>

        <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
        <div class="control-panel">
            <!-- –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –≠–ö–°–ü–ò–†–ê–¶–ò–ô -->
            <div class="expiry-toggle">
                <span class="filter-label">–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:</span>
                <button class="expiry-btn active" data-expiry="0dte">INTRADAY (Heavy)</button>
                <button class="expiry-btn" data-expiry="friday">FRIDAY (Weekly)</button>
            </div>

            <div class="calculator-panel">
                <label style="color:#fff; font-weight:bold;">Forward Correction:</label>
                <input type="number" id="forward-input" class="calc-input" placeholder="0" step="0.1" value="0">
                
                <label style="color:#fff; font-weight:bold;">Visuals:</label>
                <button class="premium-btn" id="premium-toggle">Show Premiums</button>
            </div>

            <div class="strike-filter">
                <span class="filter-label">Range:</span>
                <button class="filter-btn" data-count="50">50</button>
                <button class="filter-btn active" data-count="75">75</button>
                <button class="filter-btn" data-count="100">100</button>
                <button class="filter-btn" data-count="150">150</button>
            </div>
        </div>

        <!-- –¢–û–ü-5 –ê–ö–¢–ò–í–ù–û–°–¢–¨ -->
        <div id="top5" class="top5-container">
            <div class="top5-box">
                <div class="top5-title">üü¢ CALLS LEADERS</div>
                <div class="top5-grid">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <div style="color: #888; font-size: 0.8em; margin-bottom: 5px; text-align: center;">By Volume</div>
                            <div id="top5-call-vol"></div>
                        </div>
                        <div>
                            <div style="color: #888; font-size: 0.8em; margin-bottom: 5px; text-align: center;">By OI</div>
                            <div id="top5-call-oi"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="top5-box">
                <div class="top5-title">üî¥ PUTS LEADERS</div>
                <div class="top5-grid">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <div style="color: #888; font-size: 0.8em; margin-bottom: 5px; text-align: center;">By Volume</div>
                            <div id="top5-put-vol"></div>
                        </div>
                        <div>
                            <div style="color: #888; font-size: 0.8em; margin-bottom: 5px; text-align: center;">By OI</div>
                            <div id="top5-put-oi"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –¢–ê–ë–õ–ò–¶–ê -->
        <div class="levels-container">
            <div class="table-header-info">
                <span id="table-expiry-label">INTRADAY DATA</span>
                <span style="color:#888;">Live WebSocket Updates Active</span>
            </div>
            
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th colspan="5" style="border-bottom: 2px solid var(--call-color);">CALLS</th>
                            <th style="background:#222;"></th>
                            <th colspan="5" style="border-bottom: 2px solid var(--put-color);">PUTS</th>
                        </tr>
                        <tr>
                            <th>OI</th><th>Vol</th><th>Prem</th><th>Œî</th><th>Œì</th>
                            <th style="background:#333; color:#fff;">STRIKE</th>
                            <th>Œì</th><th>Œî</th><th>Prem</th><th>Vol</th><th>OI</th>
                        </tr>
                    </thead>
                    <tbody id="option-body">
                        <tr><td colspan="11" style="padding: 20px;">‚è≥ Connecting to Data Relay...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section id="download" class="download">
        <h2>–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h2>
        
        <div class="security-info">
            <div class="security-card">
                <div class="security-icon">üîí</div>
                <h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
                <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º –∏–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏. –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ APK –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤".</p>
                <details class="install-guide">
                    <summary>üìñ –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å?</summary>
                    <ol style="text-align: left; padding-left: 20px; margin-top: 10px;">
                        <li>–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å"</li>
                        <li>–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É.</li>
                        <li>–ù–∞–∂–º–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å".</li>
                    </ol>
                </details>
            </div>
        </div>
        
        <div class="download-card">
            <h3>Gold Options Pro v3.0</h3>
            <p style="color:#888;">Android APK</p>
            <a href="downloads/gold-options3.apk" download class="btn-download">üì• –°–∫–∞—á–∞—Ç—å (9.4 MB)</a>
        </div>
        
        <div style="margin-top: 30px;">
            <span class="disclaimer-link" onclick="openDisclaimer()">üìÑ Disclaimer & Terms</span>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Gold Options Analytics. Data sourced from CME Group via custom aggregation.</p>
    </footer>

    <!-- üî• JAVASCRIPT LOGIC -->
    <script>
        // =========================================================================
        // CONFIGURATION & STATE
        // =========================================================================
        const WS_URL = "wss://askhat777-gold-relay.hf.space/ws";
        const FIREBASE_ROOT = "https://cmeparser-default-rtdb.europe-west1.firebasedatabase.app";
        
        // State
        let currentFuturesPrice = 0;
        let heavyDataCache = []; // Stores the big table data
        let currentExpiryMode = '0dte'; // '0dte' or 'friday'
        
        // Settings
        let forwardCorrection = 0;
        let displayStrikeCount = 75;
        let showPremiums = false;

        // Charts Instances
        let charts = {
            oi: null, vol: null, gamma: null, maxPain: null,
            iv: null, delta: null, gex: null, theta: null
        };

        // =========================================================================
        // 1. WEBSOCKET CONNECTION (REAL-TIME ANALYTICS & PRICE)
        // =========================================================================
        let socket;
        let reconnectTimer = null;

        function initWebSocket() {
            console.log(`üîå Connecting to Relay: ${WS_URL}`);
            socket = new WebSocket(WS_URL);

            socket.onopen = () => {
                console.log("‚úÖ WebSocket Connected");
                document.querySelector('.warning-block .warning-text').innerHTML = 
                    `<span style="color:#4caf50; font-weight:bold;">üü¢ LIVE CONNECTION</span> | Waiting for stream...`;
                if(reconnectTimer) clearInterval(reconnectTimer);
            };

            socket.onmessage = (event) => {
                try {
                    const msg = JSON.parse(event.data);
                    
                    // A. PRICE UPDATE
                    if (msg.type === 'price' && msg.data) {
                        updatePriceUI(msg.data);
                    }
                    
                    // B. ANALYTICS UPDATE (From Python script: MathCore)
                    if (msg.type === 'analytics' && msg.data) {
                        updateAnalyticsUI(msg.data);
                    }

                } catch (e) {
                    console.error("WS Parse Error:", e);
                }
            };

            socket.onclose = () => {
                console.warn("üîå WebSocket Closed. Reconnecting in 3s...");
                document.querySelector('.warning-block .warning-text').innerHTML = 
                    `<span style="color:#f44336; font-weight:bold;">üî¥ DISCONNECTED</span> | Reconnecting...`;
                reconnectTimer = setTimeout(initWebSocket, 3000);
            };

            socket.onerror = (err) => {
                console.error("WS Error:", err);
                socket.close();
            };
        }

        // =========================================================================
        // 2. DATA HANDLERS
        // =========================================================================

        function updatePriceUI(data) {
            currentFuturesPrice = data.price;
            
            // Update Big Number
            const priceEl = document.getElementById('futures-price');
            priceEl.innerText = '$' + data.price.toFixed(1);
            
            // Add flash effect
            priceEl.style.color = '#fff';
            setTimeout(() => priceEl.style.color = 'var(--accent-gold)', 250);

            // Re-render table ATM highlight if table exists
            if (heavyDataCache.length > 0) {
                renderTable(heavyDataCache);
            }
        }

        function updateAnalyticsUI(data) {
            console.log("üìä Analytics Update:", data);

            // 1. Balance & Timestamp
            if (data.balance) document.getElementById('balance-price').innerText = '$' + data.balance;
            if (data.updated_at_utc) document.getElementById('updated-time').innerText = data.updated_at_utc + ' UTC';

            // 2. Max Pain (If passed in analytics, otherwise calculated from table)
            // Note: Python script sends raw calculation in analytics now, or we compute client side.
            // Let's rely on Python's analytics if keys exist.
            
            // 3. Zero Gamma
            if (data.zero_gamma) {
                document.getElementById('zero-gamma-value').innerText = '$' + data.zero_gamma.strike;
                const posColor = data.zero_gamma.position === 'above' ? '#4caf50' : '#f44336';
                document.getElementById('zero-gamma-label').innerHTML = 
                    `Price is <span style="color:${posColor}">${data.zero_gamma.position.toUpperCase()}</span> Zero Gamma`;
            }

            // 4. Vanna / Charm / Color (Adv Metrics)
            if (data.vanna_exposure) {
                document.getElementById('vanna-net').innerText = data.vanna_exposure.net_vanna;
                const vannaLabel = `Call: ${data.vanna_exposure.call_vanna} | Put: ${data.vanna_exposure.put_vanna}`;
                document.getElementById('vanna-label').innerText = vannaLabel;
            }
            if (data.adv_metrics) {
                document.getElementById('metric-color').innerText = data.adv_metrics.color;
                document.getElementById('metric-charm').innerText = data.adv_metrics.charm;
            }

            // 5. Expected Move
            if (data.expected_move) {
                document.getElementById('exp-move-value').innerText = `¬±$${data.expected_move}`;
                if (currentFuturesPrice > 0) {
                    const upper = (currentFuturesPrice + data.expected_move).toFixed(1);
                    const lower = (currentFuturesPrice - data.expected_move).toFixed(1);
                    document.getElementById('exp-move-range').innerText = `${lower} ‚Äî ${upper}`;
                }
            }

            // 6. GEX Profile (Walls)
            if (data.gex_profile) {
                const container = document.getElementById('key-levels-display');
                let html = '';
                
                if (data.gex_profile.top_resistance) {
                    html += `<div style="font-size:0.8em; color:#888; margin-bottom:2px;">RESISTANCE (Call Walls)</div>`;
                    data.gex_profile.top_resistance.forEach(item => {
                        html += `<div class="level-item resistance">
                            <span class="level-strike">$${item.strike}</span>
                            <span style="font-size:0.8em;">GEX: ${Math.round(item.net_gex/1000)}k</span>
                        </div>`;
                    });
                }
                
                if (data.gex_profile.top_support) {
                    html += `<div style="font-size:0.8em; color:#888; margin:8px 0 2px 0;">SUPPORT (Put Walls)</div>`;
                    data.gex_profile.top_support.forEach(item => {
                        html += `<div class="level-item support">
                            <span class="level-strike">$${item.strike}</span>
                            <span style="font-size:0.8em;">GEX: ${Math.round(item.net_gex/1000)}k</span>
                        </div>`;
                    });
                }
                container.innerHTML = html;
            }

            // 7. Calendar
            if (data.calendar && Array.isArray(data.calendar)) {
                const list = document.getElementById('calendar-list');
                list.innerHTML = data.calendar.map(e => `
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px; border-bottom:1px solid #333; padding-bottom:2px;">
                        <span style="color:var(--accent-gold); font-weight:bold;">${e.time}</span>
                        <span style="text-align:right;">${e.event}</span>
                    </div>
                `).join('');
            }
        }

        // =========================================================================
        // 3. FIREBASE FETCH (HEAVY DATA FOR TABLE & CHARTS)
        // =========================================================================

        async function fetchHeavyData() {
            const endpoint = currentExpiryMode === '0dte' ? 'gold_heavy2.json' : 'gold_friday.json';
            const url = `${FIREBASE_ROOT}/${endpoint}?t=${Date.now()}`;
            
            try {
                const response = await fetch(url);
                if(!response.ok) throw new Error("Firebase Fetch Failed");
                
                const json = await response.json();
                
                // Handle structure { data: [...], updated_at_utc: ... }
                let rows = [];
                if (json.data) {
                    rows = json.data;
                    if (json.updated_at_utc) {
                        // If websocket hasn't updated time yet, use this
                        if (document.getElementById('updated-time').innerText === '--.---.---- --:--:--') {
                            document.getElementById('updated-time').innerText = json.updated_at_utc + ' (Cached)';
                        }
                    }
                } else if (Array.isArray(json)) {
                    rows = json;
                } else {
                    // Object fallback
                    rows = Object.values(json);
                }

                // Filter invalid rows
                heavyDataCache = rows.filter(r => r.strike && (r.call || r.put));
                
                console.log(`üì¶ Loaded ${heavyDataCache.length} rows from ${endpoint}`);

                // Process client-side math for charts/table
                processClientSideMath(heavyDataCache);
                
                // Render
                renderTable(heavyDataCache);
                updateCharts(heavyDataCache);
                updateTop5(heavyDataCache);

            } catch (e) {
                console.error("Heavy Data Error:", e);
                document.getElementById('option-body').innerHTML = `<tr><td colspan="11" style="color:red">Failed to load data. Retrying...</td></tr>`;
                setTimeout(fetchHeavyData, 5000); // Retry logic
            }
        }

        function processClientSideMath(data) {
            // Client-side calculations that might not be in the light WS analytics
            // 1. Max Pain (Calculation)
            let maxPain = 0;
            let minLoss = Infinity;
            const strikes = data.map(d => d.strike);
            
            strikes.forEach(strikePrice => {
                let loss = 0;
                data.forEach(row => {
                    const s = row.strike;
                    const c_oi = row.call?.oi || 0;
                    const p_oi = row.put?.oi || 0;
                    if (strikePrice > s) loss += (strikePrice - s) * c_oi;
                    if (strikePrice < s) loss += (s - strikePrice) * p_oi;
                });
                if (loss < minLoss) {
                    minLoss = loss;
                    maxPain = strikePrice;
                }
            });
            document.getElementById('max-pain-value').innerText = '$' + maxPain;

            // 2. PCR
            let putOI = 0, callOI = 0, putVol = 0, callVol = 0;
            data.forEach(r => {
                putOI += r.put?.oi || 0;
                callOI += r.call?.oi || 0;
                putVol += r.put?.vol || 0;
                callVol += r.call?.vol || 0;
            });
            const pcrOI = callOI ? (putOI/callOI).toFixed(2) : 0;
            const pcrVol = callVol ? (putVol/callVol).toFixed(2) : 0;
            
            document.getElementById('pcr-oi').innerText = pcrOI;
            document.getElementById('pcr-vol').innerText = pcrVol;

            // 3. ITM Probabilities (Approximation via Delta)
            // Find ATM row
            const atmRow = data.reduce((prev, curr) => 
                Math.abs(curr.strike - currentFuturesPrice) < Math.abs(prev.strike - currentFuturesPrice) ? curr : prev
            );
            if(atmRow) {
                const callProb = Math.abs((atmRow.call?.delta || 0.5) * 100).toFixed(0);
                const putProb = Math.abs((atmRow.put?.delta || 0.5) * 100).toFixed(0);
                document.getElementById('prob-call').innerText = callProb + '%';
                document.getElementById('prob-put').innerText = putProb + '%';
            }

            // 4. Total Greeks
            let tDelta = 0, tGamma = 0, tVega = 0, tTheta = 0;
            data.forEach(r => {
                const netDelta = ((r.call?.delta || 0) * (r.call?.oi || 0)) + ((r.put?.delta || 0) * (r.put?.oi || 0)); // Put delta is negative usually
                const netGamma = ((r.call?.gamma || 0) * (r.call?.oi || 0)) + ((r.put?.gamma || 0) * (r.put?.oi || 0));
                const netVega = ((r.call?.vega || 0) * (r.call?.oi || 0)) + ((r.put?.vega || 0) * (r.put?.oi || 0));
                const netTheta = ((r.call?.theta || 0) * (r.call?.oi || 0)) + ((r.put?.theta || 0) * (r.put?.oi || 0));
                
                tDelta += netDelta;
                tGamma += netGamma;
                tVega += netVega;
                tTheta += netTheta;
            });

            document.getElementById('total-net-delta').innerText = Math.round(tDelta);
            document.getElementById('total-gamma').innerText = tGamma.toFixed(1);
            document.getElementById('total-vega').innerText = Math.round(tVega);
            document.getElementById('total-theta').innerText = Math.round(tTheta);
        }

        // =========================================================================
        // 4. TABLE RENDERER
        // =========================================================================

        function getValueClass(val) {
            if(val > 5000) return 'val-6';
            if(val > 2000) return 'val-5';
            if(val > 1000) return 'val-4';
            if(val > 500) return 'val-3';
            if(val > 100) return 'val-2';
            if(val > 0) return 'val-1';
            return 'val-0';
        }

        function renderTable(data) {
            const tbody = document.getElementById('option-body');
            tbody.innerHTML = '';

            // Find ATM index
            let minDiff = Infinity;
            let atmIndex = 0;
            const targetPrice = currentFuturesPrice;

            data.forEach((row, index) => {
                const diff = Math.abs(row.strike - targetPrice);
                if (diff < minDiff) {
                    minDiff = diff;
                    atmIndex = index;
                }
            });

            // Filter range
            const range = Math.floor(displayStrikeCount / 2);
            const start = Math.max(0, atmIndex - range);
            const end = Math.min(data.length, atmIndex + range);
            const subset = data.slice(start, end);

            subset.forEach((row, i) => {
                const realIndex = start + i;
                const tr = document.createElement('tr');
                if (realIndex === atmIndex) tr.classList.add('row-atm');

                const strikeVal = row.strike + forwardCorrection;
                const displayStrike = Number.isInteger(strikeVal) ? strikeVal : strikeVal.toFixed(1);

                // Strike Cell Logic (Premium toggle)
                let strikeHtml = `<span style="font-size:1.1em;">${displayStrike}</span>`;
                if (showPremiums) {
                    const cP = row.call?.premium || 0;
                    const pP = row.put?.premium || 0;
                    strikeHtml = `
                        <div style="line-height:1.1;">
                            <div style="font-size:0.8em; color:#81c784;">${(strikeVal + cP).toFixed(1)}</div>
                            <div style="font-size:1.1em; font-weight:bold;">${displayStrike}</div>
                            <div style="font-size:0.8em; color:#e57373;">${(strikeVal - pP).toFixed(1)}</div>
                        </div>
                    `;
                }

                tr.innerHTML = `
                    <td class="${getValueClass(row.call?.oi)}">${row.call?.oi || 0}</td>
                    <td class="${getValueClass(row.call?.vol)}">${row.call?.vol || 0}</td>
                    <td style="color:#aaa;">${row.call?.premium || '-'}</td>
                    <td style="color:#29b6f6;">${row.call?.delta || 0}</td>
                    <td style="color:#ffee58;">${row.call?.gamma || 0}</td>
                    
                    <td class="col-strike">${strikeHtml}</td>
                    
                    <td style="color:#ffee58;">${row.put?.gamma || 0}</td>
                    <td style="color:#f48fb1;">${row.put?.delta || 0}</td>
                    <td style="color:#aaa;">${row.put?.premium || '-'}</td>
                    <td class="${getValueClass(row.put?.vol)}">${row.put?.vol || 0}</td>
                    <td class="${getValueClass(row.put?.oi)}">${row.put?.oi || 0}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // =========================================================================
        // 5. CHART JS LOGIC
        // =========================================================================

        function updateCharts(data) {
            const labels = data.map(d => d.strike);
            
            // Prepare Data Arrays
            const callOI = data.map(d => d.call?.oi || 0);
            const putOI = data.map(d => d.put?.oi || 0);
            
            const callVol = data.map(d => d.call?.vol || 0);
            const putVol = data.map(d => d.put?.vol || 0);
            
            // GEX Calculation: (Gamma * OI * Strike * 100) / 1B (scale down)
            const callGex = data.map(d => (d.call?.gamma || 0) * (d.call?.oi || 0) * d.strike * 100 / 1000000);
            const putGex = data.map(d => (d.put?.gamma || 0) * (d.put?.oi || 0) * d.strike * 100 / 1000000);
            const netGex = callGex.map((c, i) => c - putGex[i]);

            // Max Pain (simplified loss curve for chart)
            const maxPainCurve = labels.map(strikeP => {
                let loss = 0;
                data.forEach(d => {
                    if (strikeP > d.strike) loss += (strikeP - d.strike) * (d.call?.oi || 0);
                    if (strikeP < d.strike) loss += (d.strike - strikeP) * (d.put?.oi || 0);
                });
                return loss / 100000; // Scale
            });

            const callIV = data.map(d => d.call?.iv || 0);
            const putIV = data.map(d => d.put?.iv || 0);

            const callDelta = data.map(d => (d.call?.delta || 0) * (d.call?.oi || 0));
            const putDelta = data.map(d => Math.abs(d.put?.delta || 0) * (d.put?.oi || 0)); // Visualise as positive bar but separate color

            const callTheta = data.map(d => (d.call?.theta || 0) * (d.call?.oi || 0));
            const putTheta = data.map(d => (d.put?.theta || 0) * (d.put?.oi || 0));

            // Helper to create/update chart
            const createOrUpdate = (id, type, datasets, title) => {
                const ctx = document.getElementById(id).getContext('2d');
                if (charts[id]) charts[id].destroy();
                
                charts[id] = new Chart(ctx, {
                    type: type,
                    data: {
                        labels: labels,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            x: { ticks: { color: '#666', maxRotation: 45 }, grid: { color: '#222' } },
                            y: { ticks: { color: '#666' }, grid: { color: '#222' } }
                        },
                        interaction: { mode: 'index', intersect: false }
                    }
                });
            };

            // 1. OI Chart
            createOrUpdate('oiChart', 'bar', [
                { label: 'Call OI', data: callOI, backgroundColor: 'rgba(76, 175, 80, 0.6)' },
                { label: 'Put OI', data: putOI.map(v => -v), backgroundColor: 'rgba(244, 67, 54, 0.6)' }
            ]);

            // 2. Volume Chart
            createOrUpdate('volumeChart', 'bar', [
                { label: 'Call Vol', data: callVol, backgroundColor: 'rgba(41, 182, 246, 0.6)' },
                { label: 'Put Vol', data: putVol, backgroundColor: 'rgba(255, 167, 38, 0.6)' }
            ]);

            // 3. Gamma Exposure (Lines)
            createOrUpdate('gammaChart', 'line', [
                { label: 'Call GEX', data: callGex, borderColor: '#4caf50', fill: false, tension: 0.4 },
                { label: 'Put GEX', data: putGex, borderColor: '#f44336', fill: false, tension: 0.4 }
            ]);

            // 4. Max Pain
            createOrUpdate('maxPainChart', 'line', [
                { label: 'Option Pain', data: maxPainCurve, borderColor: '#FFD700', backgroundColor: 'rgba(255, 215, 0, 0.1)', fill: true, pointRadius: 0 }
            ]);

            // 5. IV
            createOrUpdate('ivChart', 'line', [
                { label: 'Call IV', data: callIV, borderColor: '#4caf50', pointRadius: 1 },
                { label: 'Put IV', data: putIV, borderColor: '#f44336', pointRadius: 1 }
            ]);

            // 6. Delta Profile
            createOrUpdate('deltaChart', 'bar', [
                { label: 'Call Delta Exp', data: callDelta, backgroundColor: '#4caf50' },
                { label: 'Put Delta Exp', data: putDelta.map(v => -v), backgroundColor: '#f44336' }
            ]);

            // 7. Net GEX (Bar)
            createOrUpdate('gexChart', 'bar', [
                { 
                    label: 'Net GEX', 
                    data: netGex, 
                    backgroundColor: netGex.map(v => v >= 0 ? '#4caf50' : '#f44336') 
                }
            ]);

            // 8. Theta
            createOrUpdate('thetaChart', 'line', [
                { label: 'Call Theta', data: callTheta, borderColor: '#66bb6a' },
                { label: 'Put Theta', data: putTheta, borderColor: '#ef5350' }
            ]);
        }

        function updateTop5(data) {
            // Sort Helpers
            const sortDesc = (arr, key, nested) => [...arr].sort((a, b) => (b[key]?.[nested] || 0) - (a[key]?.[nested] || 0));
            
            const cVol = sortDesc(data, 'call', 'vol').slice(0, 5);
            const cOi = sortDesc(data, 'call', 'oi').slice(0, 5);
            const pVol = sortDesc(data, 'put', 'vol').slice(0, 5);
            const pOi = sortDesc(data, 'put', 'oi').slice(0, 5);

            const renderItem = (row, type, field) => {
                const val = row[type]?.[field];
                return `<div class="top5-item ${type}-item">
                    <span class="top5-strike">${row.strike}</span>
                    <span class="top5-value">${val}</span>
                </div>`;
            };

            const fill = (id, arr, type, field) => {
                document.getElementById(id).innerHTML = arr.map(r => renderItem(r, type, field)).join('');
            };

            fill('top5-call-vol', cVol, 'call', 'vol');
            fill('top5-call-oi', cOi, 'call', 'oi');
            fill('top5-put-vol', pVol, 'put', 'vol');
            fill('top5-put-oi', pOi, 'put', 'oi');
        }

        // =========================================================================
        // 6. UI CONTROLS EVENTS
        // =========================================================================

        document.querySelectorAll('.expiry-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.expiry-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                
                currentExpiryMode = e.target.dataset.expiry;
                document.getElementById('table-expiry-label').innerText = e.target.innerText;
                
                document.getElementById('option-body').innerHTML = `<tr><td colspan="11">Loading ${currentExpiryMode}...</td></tr>`;
                fetchHeavyData();
            });
        });

        document.getElementById('forward-input').addEventListener('input', (e) => {
            forwardCorrection = parseFloat(e.target.value) || 0;
            if(heavyDataCache.length) renderTable(heavyDataCache);
        });

        document.getElementById('premium-toggle').addEventListener('click', (e) => {
            showPremiums = !showPremiums;
            e.target.innerText = showPremiums ? 'Hide Premiums' : 'Show Premiums';
            e.target.classList.toggle('active');
            if(heavyDataCache.length) renderTable(heavyDataCache);
        });

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                displayStrikeCount = parseInt(e.target.dataset.count);
                if(heavyDataCache.length) renderTable(heavyDataCache);
            });
        });

        // Disclaimer Modal
        function openDisclaimer() { document.getElementById('disclaimerModal').style.display = 'block'; }
        function closeDisclaimer() { document.getElementById('disclaimerModal').style.display = 'none'; }
        window.onclick = (e) => { if(e.target == document.getElementById('disclaimerModal')) closeDisclaimer(); };

        // =========================================================================
        // 7. INIT
        // =========================================================================
        
        // Start Loops
        initWebSocket();
        fetchHeavyData();
        
        // Polling fallback for heavy data (every 5 mins)
        setInterval(fetchHeavyData, 5 * 60 * 1000);

    </script>
</body>
</html>
